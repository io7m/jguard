<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>io7m-jguard 0.1.0 Documentation: 2.1. jguard</title><meta http-equiv="Content-Type" content="application/xhtml+xml; charset=UTF-8"/><link rel="stylesheet" type="text/css" href="kstructural-layout.css"/><link rel="stylesheet" type="text/css" href="kstructural-colour.css"/><link rel="stylesheet" type="text/css" href="documentation.css"/></head><body><div class="st300_body"><div class="st300_navbar st300_navbar_top"><table class="st300_navbar_table" summary="st300_Navigation bar"><tr><td class="st300_navbar_prev_title_cell">2. Command Line Tools</td><td class="st300_navbar_up_title_cell">2. Command Line Tools</td><td class="st300_navbar_next_title_cell"/></tr><tr><td class="st300_navbar_prev_file_cell"><a rel="previous" href="p2.xhtml#st300_p2" title="Go to previous page">Previous</a></td><td class="st300_navbar_up_file_cell"><a rel="up" href="p2.xhtml#st300_p2" title="Go to parent page">Up</a></td><td class="st300_navbar_next_file_cell"/></tr></table><hr class="st300_hr"/></div><div class="st300_section_container"><a id="tools.jguard"/><div class="st300_section_title_number"><a id="st300_p2s1" href="#st300_p2s1" title="Section 2.1: jguard">2.1</a></div><div class="st300_section_title">jguard</div><ul class="st300_contents st300_section_contents_outer st300_section_contents"><li class="st300_contents_item st300_contents_item1 st300_contents_item_subsection"><a href="p2s1.xhtml#st300_p2s1ss1" title="Link to subsection 2.1.1: Synopsis">2.1.1. Synopsis</a></li><li class="st300_contents_item st300_contents_item1 st300_contents_item_subsection"><a href="p2s1.xhtml#st300_p2s1ss2" title="Link to subsection 2.1.2: version">2.1.2. version</a></li><li class="st300_contents_item st300_contents_item1 st300_contents_item_subsection"><a href="p2s1.xhtml#st300_p2s1ss3" title="Link to subsection 2.1.3: start">2.1.3. start</a></li><li class="st300_contents_item st300_contents_item1 st300_contents_item_subsection"><a href="p2s1.xhtml#st300_p2s1ss4" title="Link to subsection 2.1.4: download-base-archive">2.1.4. download-base-archive</a></li><li class="st300_contents_item st300_contents_item1 st300_contents_item_subsection"><a href="p2s1.xhtml#st300_p2s1ss5" title="Link to subsection 2.1.5: create-jail-base">2.1.5. create-jail-base</a></li><li class="st300_contents_item st300_contents_item1 st300_contents_item_subsection"><a href="p2s1.xhtml#st300_p2s1ss6" title="Link to subsection 2.1.6: create-jail">2.1.6. create-jail</a></li></ul><div class="st300_subsection_container"><a id="tools.jguard.synopsis"/><div class="st300_subsection_title_number"><a id="st300_p2s1ss1" href="#st300_p2s1ss1" title="Subsection 2.1.1: Synopsis">2.1.1</a></div><div class="st300_subsection_title">Synopsis</div><div class="st300_paragraph_container"><div class="st300_paragraph_number"><a id="st300_p2s1ss1c1" href="#st300_p2s1ss1c1" title="Paragraph 2.1.1.1">1</a></div><div class="st300_paragraph">The <span class="st300_term command">jguard</span> command provides various functions for creating and supervising FreeBSD jails.</div></div><div class="st300_paragraph_container"><div class="st300_paragraph_number"><a id="st300_p2s1ss1c2" href="#st300_p2s1ss1c2" title="Paragraph 2.1.1.2">2</a></div><div class="st300_paragraph"><pre class="st300_verbatim terminal">Usage: jguard [options] [command] [command options]
  Options:
    -verbose
      Set the minimum logging verbosity level
      Default: info
      Possible Values: [trace, debug, info, warn, error]
  Commands:
    start      Start a jail
      Usage: start [options]
        Options:
        * -file
            The jail configuration file
          -verbose
            Set the minimum logging verbosity level
            Default: info
            Possible Values: [trace, debug, info, warn, error]

    download-base-archive      Download a binary archive for creating a jail
      Usage: download-base-archive [options]
        Options:
          -arch
            Override the system architecture
        * -archive
            The output file
          -base-uri
            Override the base URI
            Default: http://ftp.freebsd.org/pub/FreeBSD/releases/
          -fetch-archive
            Select a specific archive file
            Default: base.txz
          -release
            Override the system release
          -retry
            Set the number of retries for failed downloads (0 is unlimited)
            Default: 10
          -verbose
            Set the minimum logging verbosity level
            Default: info
            Possible Values: [trace, debug, info, warn, error]

    create-jail-base      Create a base jail and template from an archive
      Usage: create-jail-base [options]
        Options:
        * -archive
            Select a specific archive file
          -archive-format
            Explicitly specify the archive format
            Possible Values: [JAIL_ARCHIVE_FORMAT_TAR_XZ]
        * -base
            The created base directory
        * -base-template
            The created base template directory
          -verbose
            Set the minimum logging verbosity level
            Default: info
            Possible Values: [trace, debug, info, warn, error]

    create-jail      Create a jail
      Usage: create-jail [options]
        Options:
        * -base
            The base directory
        * -base-template
            The base template directory
        * -hostname
            The jail hostname
          -ipv4
            The jail IPv4 address
          -ipv6
            The jail IPv6 address
        * -name
            The jail name
        * -root
            The jail directory
        * -start-command
            The command that will be executed inside the jail on startup
          -verbose
            Set the minimum logging verbosity level
            Default: info
            Possible Values: [trace, debug, info, warn, error]

    version      Retrieve the program version
      Usage: version [options]
        Options:
          -verbose
            Set the minimum logging verbosity level
            Default: info
            Possible Values: [trace, debug, info, warn, error]
</pre></div></div><div class="st300_paragraph_container"><div class="st300_paragraph_number"><a id="st300_p2s1ss1c3" href="#st300_p2s1ss1c3" title="Paragraph 2.1.1.3">3</a></div><div class="st300_paragraph">The command line tool is distributed as part of the executable <span class="st300_term file">io7m-jguard-cmdline-0.1.0-main.jar</span> file (referred to as <span class="st300_term command">jguard.jar</span> in usage examples, for brevity):</div></div><div class="st300_paragraph_container"><div class="st300_paragraph_number"><a id="st300_p2s1ss1c4" href="#st300_p2s1ss1c4" title="Paragraph 2.1.1.4">4</a></div><div class="st300_paragraph"><pre class="st300_verbatim terminal">$ java -jar io7m-jguard-cmdline-0.1.0-main.jar</pre></div></div></div><div class="st300_subsection_container"><a id="tools.jguard.version"/><div class="st300_subsection_title_number"><a id="st300_p2s1ss2" href="#st300_p2s1ss2" title="Subsection 2.1.2: version">2.1.2</a></div><div class="st300_subsection_title">version</div><div class="st300_paragraph_container"><div class="st300_paragraph_number"><a id="st300_p2s1ss2c1" href="#st300_p2s1ss2c1" title="Paragraph 2.1.2.1">1</a></div><div class="st300_paragraph">The <span class="st300_term command">version</span> subcommand displays the version of the package.</div></div></div><div class="st300_subsection_container"><a id="tools.jguard.start"/><div class="st300_subsection_title_number"><a id="st300_p2s1ss3" href="#st300_p2s1ss3" title="Subsection 2.1.3: start">2.1.3</a></div><div class="st300_subsection_title">start</div><div class="st300_paragraph_container"><div class="st300_paragraph_number"><a id="st300_p2s1ss3c1" href="#st300_p2s1ss3c1" title="Paragraph 2.1.3.1">1</a></div><div class="st300_paragraph">The <span class="st300_term command">start</span> subcommand parses the given jail configuration file and starts the specified jail. The command directly executes a process within the specified jail: The current process image is completely replaced with the specified jail command and is intended to be used with a process supervision system.</div></div><div class="st300_paragraph_container"><div class="st300_paragraph_number"><a id="st300_p2s1ss3c2" href="#st300_p2s1ss3c2" title="Paragraph 2.1.3.2">2</a></div><div class="st300_paragraph"><pre class="st300_verbatim terminal"># java -jar jguard.jar start -file jail0.conf</pre></div></div></div><div class="st300_subsection_container"><a id="tools.jguard.download_base_archive"/><div class="st300_subsection_title_number"><a id="st300_p2s1ss4" href="#st300_p2s1ss4" title="Subsection 2.1.4: download-base-archive">2.1.4</a></div><div class="st300_subsection_title">download-base-archive</div><div class="st300_paragraph_container"><div class="st300_paragraph_number"><a id="st300_p2s1ss4c1" href="#st300_p2s1ss4c1" title="Paragraph 2.1.4.1">1</a></div><div class="st300_paragraph">The <span class="st300_term command">download-base-archive</span> subcommand downloads an installation archive intended for creating new jails. Typically, this archive will be the <span class="st300_term file">base.txz</span> file distributed with FreeBSD releases.</div></div><div class="st300_paragraph_container"><div class="st300_paragraph_number"><a id="st300_p2s1ss4c2" href="#st300_p2s1ss4c2" title="Paragraph 2.1.4.2">2</a></div><div class="st300_paragraph"><pre class="st300_verbatim terminal"># java -jar jguard.jar download-base-archive -archive /usr/jail/base.txz</pre></div></div><div class="st300_paragraph_container"><a id="tools.jguard.download_base_archive.proxy"/><div class="st300_paragraph_number"><a id="st300_p2s1ss4c3" href="#st300_p2s1ss4c3" title="Paragraph 2.1.4.3">3</a></div><div class="st300_paragraph">The command supports the use of HTTP proxies via the standard Java <span class="st300_term variable">http.proxyHost</span> and <span class="st300_term variable">http.proxyPort</span> properties:</div></div><div class="st300_paragraph_container"><div class="st300_paragraph_number"><a id="st300_p2s1ss4c4" href="#st300_p2s1ss4c4" title="Paragraph 2.1.4.4">4</a></div><div class="st300_paragraph"><pre class="st300_verbatim terminal"># java -jar jguard.jar
  -Dhttp.proxyHost=proxy.example.com
  -Dhttp.proxyPort=3128
  download-base-archive
  -archive /usr/jail/base.txz</pre></div></div><div class="st300_paragraph_container"><div class="st300_paragraph_number"><a id="st300_p2s1ss4c5" href="#st300_p2s1ss4c5" title="Paragraph 2.1.4.5">5</a></div><div class="st300_paragraph">Note that as of the time of writing, <a class="st300_link_external" href="https://ftp.freebsd.org">ftp.freebsd.org</a> currently has a misconfigured TLS certificate (the  certificate is only valid for <a class="st300_link_external" href="https://download.freebsd.org">download.freebsd.org</a>) and therefore the command will fail with a TLS error when attempting to use the <span class="st300_term protocol">https</span> site. Additionally, the FreeBSD project does not provide PGP signatures for the individual binary archives from the FTP sites and, bizarrely, instead relies on providing them via the <a class="st300_link_external" href="https://svnweb.freebsd.org/ports/head/misc/freebsd-release-manifests/">misc/freebsd-release-manifests</a> package. It is STRONGLY recommended to check the signatures of any downloaded archives against the signatures in this package.</div></div></div><div class="st300_subsection_container"><a id="tools.jguard.create_jail_base"/><div class="st300_subsection_title_number"><a id="st300_p2s1ss5" href="#st300_p2s1ss5" title="Subsection 2.1.5: create-jail-base">2.1.5</a></div><div class="st300_subsection_title">create-jail-base</div><div class="st300_paragraph_container"><div class="st300_paragraph_number"><a id="st300_p2s1ss5c1" href="#st300_p2s1ss5c1" title="Paragraph 2.1.5.1">1</a></div><div class="st300_paragraph">The <span class="st300_term command">create-jail-base</span> subcommand unpacks an archive containing a FreeBSD base system and creates <span class="st300_term file">base</span> and <span class="st300_term file">base-template</span> directories that are shared between jail instances.</div></div><div class="st300_paragraph_container"><div class="st300_paragraph_number"><a id="st300_p2s1ss5c2" href="#st300_p2s1ss5c2" title="Paragraph 2.1.5.2">2</a></div><div class="st300_paragraph"><pre class="st300_verbatim terminal"># java -jar jguard.jar
  create-jail-base
  -archive /usr/jail/base.txz
  -base /usr/jail/base
  -base-template /usr/jail/base-template</pre></div></div></div><div class="st300_subsection_container"><a id="tools.jguard.create_jail"/><div class="st300_subsection_title_number"><a id="st300_p2s1ss6" href="#st300_p2s1ss6" title="Subsection 2.1.6: create-jail">2.1.6</a></div><div class="st300_subsection_title">create-jail</div><div class="st300_paragraph_container"><div class="st300_paragraph_number"><a id="st300_p2s1ss6c1" href="#st300_p2s1ss6c1" title="Paragraph 2.1.6.1">1</a></div><div class="st300_paragraph">The <span class="st300_term command">create-jail</span> subcommand creates a new jail.</div></div><div class="st300_paragraph_container"><div class="st300_paragraph_number"><a id="st300_p2s1ss6c2" href="#st300_p2s1ss6c2" title="Paragraph 2.1.6.2">2</a></div><div class="st300_paragraph"><pre class="st300_verbatim terminal"># java -jar jguard.jar
  create-jail
  -base /usr/jail/base
  -base-template /usr/jail/base-template
  -hostname jail0.example.com
  -name jail0_example_com
  -root /usr/jail/jail0.example.com
  -start-command "/usr/local/bin/s6-svscan /service"
  -ipv4 10.8.0.23</pre></div></div></div></div><div class="st300_navbar st300_navbar_bottom"><hr class="st300_hr"/><table class="st300_navbar_table" summary="st300_Navigation bar"><tr><td class="st300_navbar_prev_file_cell"><a rel="previous" href="p2.xhtml#st300_p2" title="Go to previous page">Previous</a></td><td class="st300_navbar_up_file_cell"><a rel="up" href="p2.xhtml#st300_p2" title="Go to parent page">Up</a></td><td class="st300_navbar_next_file_cell"/></tr><tr><td class="st300_navbar_prev_title_cell">2. Command Line Tools</td><td class="st300_navbar_up_title_cell">2. Command Line Tools</td><td class="st300_navbar_next_title_cell"/></tr></table></div></div></body></html>
